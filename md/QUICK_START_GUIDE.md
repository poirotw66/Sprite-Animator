# Quick Start Guide - Background Color Normalization
# 快速入門指南 - 背景顏色標準化

## 🎯 What is This? (這是什麼?)

當你使用 AI 生成帶有綠幕或洋紅色背景的精靈圖時,AI 可能會生成與標準色略有不同的顏色,導致去背失敗。

**新功能**: 自動顏色標準化會在幕後自動修正這些色差,確保完美去背!

## ✨ 使用方法 (How to Use)

### 步驟 1: 正常使用應用

```
1. 上傳角色圖片
2. 輸入動作描述 (例如: "跑步循環")
3. 選擇背景顏色:
   - 🟣 洋紅色 (Magenta) - 推薦
   - 🟢 綠幕 (Green Screen)
4. 點擊「生成精靈圖」
```

### 步驟 2: 等待生成

```
正在生成 4x4 連貫動作精靈圖...
↓
正在標準化背景顏色...  ← 新功能自動執行!
↓
處理完成 ✅
```

### 步驟 3: 享受完美去背

```
- 背景完全透明
- 角色邊緣清晰
- 無色邊殘留
```

## 🎨 支援的顏色 (Supported Colors)

### 洋紅色 (Magenta)
- **標準色**: `#FF00FF` (R=255, G=0, B=255)
- **AI 可能生成**: `#FE00FE`, `#FC00FC`, `#FF10FF` 等
- **自動修正為**: `#FF00FF` ✅

### 綠幕 (Green Screen)
- **標準色**: `#00B140` (R=0, G=177, B=64)
- **AI 可能生成**: `#00FF00`, `#00C850`, `#10B145` 等
- **自動修正為**: `#00B140` ✅

## 💡 常見問題 (FAQ)

### Q1: 我需要做什麼特殊設定嗎?
**A**: 不需要!這是完全自動的功能,在背景生成後自動執行。

### Q2: 會增加處理時間嗎?
**A**: 只增加 0.1-0.5 秒,幾乎無感。

### Q3: 我可以看到處理進度嗎?
**A**: 可以!進度條會顯示「正在標準化背景顏色...」。

### Q4: 如果去背還是失敗怎麼辦?
**A**: 請查看 [TEST_COLOR_NORMALIZATION.md](./TEST_COLOR_NORMALIZATION.md) 中的故障排除指南。

### Q5: 支援其他顏色嗎?
**A**: 目前僅支援洋紅色和綠幕,未來會加入更多顏色選項。

## 🔍 技術細節 (Technical Details)

### 什麼是顏色標準化?

AI 生成的圖片中,背景顏色可能與預期的去背顏色有細微差異:

```
期望: #00B140 (專業綠幕)
實際: #00FF00 (Lime 綠) ← 差異太大!
```

**顏色標準化** 會自動:
1. 檢測所有「類似」目標顏色的像素
2. 將它們替換為精確的目標顏色
3. 確保去背算法能正確識別

### 檢測範圍

使用**寬容的容差值 (80 單位)** 來檢測相似顏色:

```typescript
// 對於綠色
isGreenLike = (
    g > 80 &&       // 綠色強度
    r < 120 &&      // 低紅色
    b < 150 &&      // 低藍色
    g > r + 40 &&   // 綠色明顯高於紅色
    g > b           // 綠色高於藍色
)
```

### 效能影響

| 項目 | 數值 |
|-----|------|
| 處理時間 | 100-500ms |
| 記憶體使用 | 4-64MB (臨時) |
| API 請求 | 0 (客戶端處理) |
| 使用者體驗 | 幾乎無感知 |

## 📊 效果對比 (Before vs After)

### 之前 (Without Normalization)

```
❌ 問題:
- AI 生成 #00FF00 (Lime 綠)
- 去背算法尋找 #00B140 (標準綠幕)
- 顏色不匹配 → 去背失敗
- 背景殘留、有色邊

🔧 解決方法:
- 手動在圖片編輯軟體修正顏色
- 或重新生成,碰運氣
```

### 之後 (With Normalization)

```
✅ 自動修正:
- AI 生成 #00FF00 (Lime 綠)
- 系統自動檢測並替換為 #00B140
- 顏色完全匹配 → 去背成功
- 背景完全透明、無色邊

😎 使用者體驗:
- 完全自動,無需人工介入
- 每次都能成功
- 節省時間和精力
```

## 🧪 測試工具 (Testing Tool)

想要測試顏色標準化功能?

```bash
# 開啟測試工具
open test-color-normalization.html
```

測試工具提供:
- ✅ 洋紅色變體測試
- ✅ 綠幕變體測試
- ✅ 視覺比較工具

詳細說明請參閱 [TEST_COLOR_NORMALIZATION.md](./TEST_COLOR_NORMALIZATION.md)

## 📚 進階資源 (Advanced Resources)

想了解更多技術細節?

- [**技術文檔**](./BACKGROUND_COLOR_NORMALIZATION.md) - 完整的技術實作說明
- [**變更日誌**](./CHANGELOG_COLOR_NORMALIZATION.md) - 詳細的修改記錄
- [**流程圖**](./COLOR_NORMALIZATION_DIAGRAM.md) - 視覺化的處理流程
- [**測試指南**](./TEST_COLOR_NORMALIZATION.md) - 完整的測試說明
- [**解決方案總結**](./SOLUTION_SUMMARY.md) - 整體解決方案概述

## 🎯 最佳實踐 (Best Practices)

### 1. 選擇正確的背景顏色

```
✅ 推薦: 洋紅色 (Magenta)
   - 較少出現在角色設計中
   - 去背效果通常更好
   
⚠️ 注意: 綠幕 (Green Screen)
   - 如果角色有綠色元素,可能會被誤判
   - 適合無綠色元素的角色
```

### 2. 檢查生成結果

```
生成後,快速檢查:
1. 背景是否完全透明?
2. 角色邊緣是否清晰?
3. 有沒有殘留的色邊?

如果發現問題:
→ 查看 [故障排除指南](./TEST_COLOR_NORMALIZATION.md#故障排除-troubleshooting)
```

### 3. 優化生成品質

```
為了獲得最佳效果:
- 使用高解析度的參考圖片
- 提供清晰的動作描述
- 選擇適合的幀數（4-8 幀為佳）
- 確保網路連線穩定
```

## 🆘 需要幫助? (Need Help?)

如果遇到問題:

1. **首先**: 查看 [FAQ](#-常見問題-faq) 章節
2. **然後**: 使用 [測試工具](./test-color-normalization.html) 驗證
3. **最後**: 查閱 [故障排除指南](./TEST_COLOR_NORMALIZATION.md#故障排除-troubleshooting)

## 🎉 總結 (Summary)

**背景顏色標準化** 是一個:
- ✅ 完全自動的功能
- ✅ 無需使用者介入
- ✅ 確保完美去背
- ✅ 節省時間和精力
- ✅ 無額外成本

**只需正常使用應用,其餘的交給我們!**

---

**版本**: v1.2.0  
**更新日期**: 2026-01-30  
**狀態**: ✅ 已上線

**享受您的動畫創作! 🎨✨**
